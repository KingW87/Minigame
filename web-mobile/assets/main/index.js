System.register("bundle://main/_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,r,e,i,s,o,u,a,c;return{setters:[function(n){t=n.inheritsLoose,r=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){i=n.cclegacy,s=n._decorator,o=n.AudioSource,u=n.Component,a=n.resources,c=n.AudioClip}],execute:function(){var d,h;i._RF.push({},"7993ffNAsZDYJNQh8G96fuC","AudioManager",void 0);var l=s.ccclass;s.property,n("AudioManager",l("AudioManager")(((h=function(n){function i(){for(var t,r=arguments.length,e=new Array(r),i=0;i<r;i++)e[i]=arguments[i];return(t=n.call.apply(n,[this].concat(e))||this).audioSource=null,t.sndAudioSource=null,t.isSndOn=!0,t.isBgmOn=!0,t.bgmPath="/bgm",t.sndPath="/snd",t.bgms={},t.snds={},t}t(i,n),i.getInstance=function(){return i.instance};var s=i.prototype;return s.setBgmPath=function(n){this.bgmPath=n},s.setSndPath=function(n){this.sndPath=n},s.onLoad=function(){i.instance=this;var n=this.node.getComponents(o);this.audioSource=n[0],this.sndAudioSource=n[1],this.isBgmOn=!0,this.isSndOn=!0},s.load=function(){var n=r(e().mark((function n(){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.loadBgm();case 2:return n.next=4,this.loadSnd();case 4:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),s.loadBgm=function(){var n=r(e().mark((function n(){var t=this;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){a.loadDir(t.bgmPath,c,(function(e,i){if(e)r(e);else{for(var s=0;s<i.length;s++)t.bgms[i[s].name]=i[s];n(i)}}))})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),s.loadSnd=function(){var n=r(e().mark((function n(){var t=this;return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,r){a.loadDir(t.sndPath,c,(function(e,i){if(e)r(e);else{for(var s=0;s<i.length;s++)t.snds[i[s].name]=i[s];n(i)}}))})));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),s.playBgm=function(n){this.bgms.hasOwnProperty(n)&&(this.audioSource.playing&&this.audioSource.stop(),this.audioSource.clip=this.bgms[n],this.isBgmOn?this.audioSource.play():this.audioSource.pause())},s.playSnd=function(n,t){void 0===t&&(t=null),this.snds.hasOwnProperty(n)&&this.isSndOn&&(t?(t.clip=this.snds[n],t.play()):(this.sndAudioSource.clip=this.snds[n],this.sndAudioSource.play()))},i}(u)).instance=null,d=h))||d);i._RF.pop()}}}));

System.register("bundle://main/_virtual/BaseApp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,o,r,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,r=t.director,s=t.Component}],execute:function(){var i,c;e._RF.push({},"a5f1fQkYFNO3oKTrukVfxtR","BaseApp",void 0);var a=o.ccclass;o.property,t("BaseApp",a("BaseApp")(((c=function(t){function e(){return t.apply(this,arguments)||this}n(e,t),e.getInstance=function(){return e.instance};var o=e.prototype;return o.onLoad=function(){e.instance=this,r.addPersistRootNode(this.node)},o.start=function(){},e}(s)).instance=null,i=c))||i);e._RF.pop()}}}));

System.register("bundle://main/_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodePoolMap.ts","./GameConfig.ts"],(function(t){var e,i,o,a,s,r,n,h,c,u,l;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){o=t.cclegacy,a=t._decorator,s=t.Vec3,r=t.Quat,n=t.v3,h=t.quat,c=t.Component},function(t){u=t.default},function(t){l=t.NodePoolName}],execute:function(){var g;o._RF.push({},"b93c9bL2+hI0o6fi8KID4H8","Bullet",void 0);var d=a.ccclass;a.property,t("Bullet",d("Bullet")(g=function(t){function o(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).inited=!1,e.isDestroy=!1,e.movSpeed=1200,e.movDir=n(0,0,0),e.rotate=0,e.q=h(0,0,0,0),e._damage=75,e._shooter=null,e._attackTarget=null,e}e(o,t);var a=o.prototype;return a.onLoad=function(){},a.start=function(){},a.setShooterAndTarget=function(t,e){this.shooter=t,this.attackTarget=e,this.damage=this.shooter.damage,this.inited=!0},a.clearAttackTarget=function(){this.attackTarget=null,this.isDestroy=!0,this.node.active=!1},a.reset=function(){this.node.active=!0,this.inited=!1,this.isDestroy=!1,this.movSpeed=1200,this.shooter=null,this.attackTarget=null,this.rotate=0},a.backToPool=function(){this.node.removeFromParent(),this.reset(),u.put(l.Bullet,this.node)},a.moveToTarget=function(t){if(this.attackTarget)if(this.attackTarget.isDeath)this.clearAttackTarget();else if(s.subtract(this.movDir,this.attackTarget.node.getPosition(),this.node.getPosition()),this.movDir.lengthSqr()<300)this.attackTarget.onDamage(this),this.clearAttackTarget();else{s.normalize(this.movDir,this.movDir),s.multiplyScalar(this.movDir,this.movDir,t*this.movSpeed);var e=this.node.getPosition();e.add(this.movDir),this.node.setPosition(e),this.rotate+=1e3*t,r.fromEuler(this.q,0,0,this.rotate%360),this.node.setRotation(this.q)}},i(o,[{key:"damage",get:function(){return this._damage},set:function(t){this._damage=t}},{key:"shooter",get:function(){return this._shooter},set:function(t){this._shooter=t}},{key:"attackTarget",get:function(){return this._attackTarget},set:function(t){this._attackTarget=t}}]),o}(c))||g);o._RF.pop()}}}));

System.register("bundle://main/_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("bundle://main/_virtual/FadeoutEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodePoolMap.ts","./GameConfig.ts"],(function(t){var o,e,n,i,a,c,s,u,r;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,i=t.UIOpacity,a=t.tween,c=t.v3,s=t.Component},function(t){u=t.default},function(t){r=t.NodePoolName}],execute:function(){var f;e._RF.push({},"6e975Z0opZDx7rXuDz3LqYq","FadeoutEffect",void 0);var p=n.ccclass;n.property,t("FadeoutEffect",p("FadeoutEffect")(f=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this).uiopacity=null,o}o(e,t);var n=e.prototype;return n.onLoad=function(){this.uiopacity=this.node.getComponent(i)},n.startAnim=function(){var t=this;a(this.node).to(.5,{position:c(this.node.getPosition().x,this.node.getPosition().y+75,0)}).start(),a(this.uiopacity).to(.5,{opacity:0}).call((function(){t.backToPool()})).start()},n.backToPool=function(){this.node.removeFromParent(),this.uiopacity.opacity=255,this.node.setPosition(0,0,0),u.put(r.DeathEffect,this.node)},n.update=function(t){},e}(s))||f);e._RF.pop()}}}));

System.register("bundle://main/_virtual/Fruit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameObj.ts","./TDGame.ts","./Monster.ts","./GameScene.ts","./RuHua.ts","./NodePoolMap.ts","./GameConfig.ts","./Bullet.ts","./AudioManager.ts","./Pack.ts","./FruitManager.ts"],(function(t){var e,i,s,n,a,r,o,l,c,h,d,u,g,f,m,p,v,k,G,T,b,I,S,y;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){s=t.cclegacy,n=t._decorator,a=t.Animation,r=t.Label,o=t.Sprite,l=t.v3,c=t.tween,h=t.UITransform,d=t.Vec3},function(t){u=t.GameObj},function(t){g=t.TDGame,f=t.GameState},function(t){m=t.Monster},function(t){p=t.GameScene},function(t){v=t.RuHua},function(t){k=t.default},function(t){G=t.FruitPrefabs,T=t.NodePoolName},function(t){b=t.Bullet},function(t){I=t.AudioManager},function(t){S=t.Pack},function(t){y=t.FruitManager}],execute:function(){var A;s._RF.push({},"55aeeHDQsVKMLxVqZOaZ/ON","Fruit",void 0);var F=n.ccclass;n.property,t("Fruit",F("Fruit")(A=function(t){function s(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).baseAtkSpeed=1.5,e.baseDamage=75,e.atkSpeed=1.5,e.damage=75,e.timeTick=0,e.anim=null,e.fillGrids=[],e.levelLabel=null,e.sprite=null,e._attackTarget=null,e.fruitId=0,e.fruitName="",e._level=1,e}e(s,t);var n=s.prototype;return n.setFruitId=function(t){t<0||t>=G.length||(this.fruitId=t,this.baseAtkSpeed=G[this.fruitId].atkSpeed,this.baseDamage=G[this.fruitId].damage,this.atkSpeed=G[this.fruitId].atkSpeed,this.damage=G[this.fruitId].damage,this.fruitName=G[this.fruitId].name)},n.getFruitId=function(){return this.fruitId},n.customInit=function(){this.anim=this.node.getChildByName("sprite").getComponent(a),this.levelLabel=this.node.getChildByName("levelLabel").getComponent(r),this.sprite=this.node.getChildByName("sprite").getComponent(o)},n.start=function(){},n.getLevel=function(){return this._level},n.onAddPack=function(){t.prototype.onAddPack.call(this),this.fillGrids.splice(0,this.fillGrids.length);for(var e=0;e<this.coverGrids.length;e++)this.fillGrids.push(this.coverGrids[e])},n.onRemoveFromPack=function(){t.prototype.onRemoveFromPack.call(this);for(var e=0;e<this.fillGrids.length;e++)this.fillGrids[e].setGameObj(null);this.fillGrids.splice(0,this.fillGrids.length)},n.moveToCoverGrids=function(){t.prototype.moveToCoverGrids.call(this);for(var e=0;e<this.fillGrids.length;e++)this.fillGrids[e].setGameObj(null);this.fillGrids.splice(0,this.fillGrids.length);for(var i=0;i<this.coverGrids.length;i++)this.fillGrids.push(this.coverGrids[i]),this.coverGrids[i].setGameObj(this)},n.backToFillGrids=function(){t.prototype.backToFillGrids.call(this),this.coverGrids.splice(0,this.coverGrids.length);for(var e=0;e<this.fillGrids.length;e++)this.coverGrids.push(this.fillGrids[e]);this.centerOnCoverGrids()},n.merge=function(t){for(var e=t.getComponent(s),i=0;i<e.fillGrids.length;i++)e.fillGrids[i].setGameObj(null);t.node.removeFromParent(),t.node.destroy();var n=l(1,1,1);this.node.parent===y.getInstance().attachNode&&n.set(this._scale,this._scale,1),c(this.node).to(.2,{scale:l(1.5,1.5,1)}).to(.2,{scale:n}).union().start(),this.level=this.getLevel()+1,I.getInstance().playSnd("merge")},n.tryMerge=function(t){if(!t)return!1;if(t!==this&&t.getFruitId()===this.getFruitId()&&t.getLevel()===this.getLevel()){var e=l(0,0,0),i=t.node.getPosition();if(t.node.parent===S.getInstance().attachNode){var s=t.node.getComponent(h).convertToWorldSpaceAR(d.ZERO);i=y.getInstance().attachNode.getComponent(h).convertToNodeSpaceAR(s)}return d.subtract(e,this.node.getPosition(),i),e.length()<=50&&(this.merge(t),!0)}return!1},n.tryAttack=function(t){this.timeTick+=t,this.attackTarget||this.getAttackTarget(),this.attackTarget&&this.timeTick>=this.atkSpeed&&this.shoot()},n.shoot=function(){var t=k.get(T.Bullet).getComponent(b);t.setShooterAndTarget(this,this.attackTarget),p.getInstance().addBullet(t),this.anim.play(),this.timeTick=0,I.getInstance().playSnd("shoot")},n.clearAttackTarget=function(){this.attackTarget=null},n.getAttackTarget=function(){for(var t=99999999,e=l(0,0,0),i=0,s=null,n=0;n<p.getInstance().monsterAttachNode.children.length;n++){var a=p.getInstance().monsterAttachNode.children[n].getComponent(m);a.isDeath||a.isExpectDeath()||(d.subtract(e,v.getInstance().node.getPosition(),a.node.getPosition()),(i=e.lengthSqr())<t&&(t=i,s=a))}return this.attackTarget=s,this.attackTarget&&this.attackTarget.addAttacker(this),s},n.update=function(t){g.getInstance().gameState===f.gameing&&this.tryAttack(t)},i(s,[{key:"attackTarget",get:function(){return this._attackTarget},set:function(t){this._attackTarget=t}},{key:"level",set:function(t){this.init(),this._level=t,this.atkSpeed=this.baseAtkSpeed-.3*this._level,this.atkSpeed<.3&&(this.atkSpeed=.3),this.damage=this.baseDamage+20*this._level,this.levelLabel.string="Lv."+this._level}}]),s}(u))||A);s._RF.pop()}}}));

System.register("bundle://main/_virtual/FruitManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PrefabManager.ts","./MathUtil.ts","./GameConfig.ts","./GameObj.ts","./Platform.ts","./Fruit.ts"],(function(t){var e,n,a,i,o,r,c,s,h,d,l,u,g;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,i=t.instantiate,o=t.Component},function(t){r=t.PrefabManager},function(t){c=t.default},function(t){s=t.GridPrefabs,h=t.FruitPrefabs},function(t){d=t.GameObj,l=t.GameObjType},function(t){u=t.Platform},function(t){g=t.Fruit}],execute:function(){var f,m;n._RF.push({},"7d221gSbbJKsal0T4Fk/lDj","FruitManager",void 0);var b=a.ccclass;a.property,t("FruitManager",b("FruitManager")(((m=function(t){function n(){for(var e,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))||this).attachNode=null,e.bgSpriteNode=null,e}e(n,t),n.getInstance=function(){return n.instance};var a=n.prototype;return a.onLoad=function(){n.instance=this,this.attachNode=this.node.getChildByName("attach"),this.bgSpriteNode=this.node.getChildByName("bg")},a.start=function(){},a.spawnGameObjs=function(t){void 0===t&&(t=!1);var e=c.randRangeNumber(0,s.length-1),a=i(r.getInstance().get(s[e])).getComponent(d);this.addGameObj(a),e=c.randRangeNumber(0,h.length-1);var o=i(r.getInstance().get(h[e].name));(a=o.getComponent(d)).scale=n.objScale,o.getComponent(g).setFruitId(e),t&&(o.getComponent(g).level=2),this.addGameObj(a),e=c.randRangeNumber(0,h.length-1),(a=(o=i(r.getInstance().get(h[e].name))).getComponent(d)).scale=n.objScale,o.getComponent(g).setFruitId(e),this.addGameObj(a),this.updateObjsPosition()},a.clear=function(){this.attachNode.destroyAllChildren(),this.attachNode.removeAllChildren()},a.refreshGameObjs=function(t){void 0===t&&(t=!1),this.attachNode.destroyAllChildren(),this.attachNode.removeAllChildren(),this.spawnGameObjs(t)},a.addGameObj=function(t){this.attachNode.addChild(t.node),t.canDrag=!0},a.removeGameObj=function(t){t&&(t.node.removeFromParent(),this.updateObjsPosition())},a.hideFruits=function(){for(var t=0;t<this.attachNode.children.length;t++){this.attachNode.children[t].getComponent(d).objType===l.Fruit&&(this.attachNode.children[t].active=!1)}},a.showAll=function(){this.show(!0);for(var t=0;t<this.attachNode.children.length;t++)this.attachNode.children[t].active=!0},a.show=function(t){this.bgSpriteNode.active=t,this.attachNode.active=t},a.updateObjsPosition=function(){for(var t=this.attachNode.children.length,e=220*n.objScale,a=t*e,i=(u.getInstance().designSize.x-a)/(t+1),o=-.5*(a+(t-1)*i)+.5*e,r=0;r<this.attachNode.children.length;r++){this.attachNode.children[r].getComponent(d).changeTweenPos(o+r*i+r*e,0)}},a.tryMerge=function(t){if(t.objType!==l.Fruit)return!1;for(var e=t.getComponent(g),a=0;a<this.attachNode.children.length;a++){if(this.attachNode.children[a].getComponent(d).objType===l.Fruit)if(this.attachNode.children[a].getComponent(g).tryMerge(e))return n.getInstance().updateObjsPosition(),!0}return!1},a.update=function(t){},n}(o)).objScale=1.3,m.instance=null,f=m))||f);n._RF.pop()}}}));

System.register("bundle://main/_virtual/GameApp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseApp.ts","./Utils.ts"],(function(t){var n,a,o,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){a=t.cclegacy,o=t._decorator},function(t){e=t.BaseApp},function(t){i=t.default}],execute:function(){var r;a._RF.push({},"2caa9ZBoyJBb5WpyQ57JRqB","GameApp",void 0);var p=o.ccclass;o.property,t("GameApp",p("GameApp")(r=function(t){function a(){for(var n,a=arguments.length,o=new Array(a),e=0;e<a;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this).gameLoading=null,n}n(a,t);var o=a.prototype;return o.onLoad=function(){t.prototype.onLoad.call(this),this.init()},o.start=function(){t.prototype.start.call(this),this.gameLoading.startLoading("game")},o.init=function(){var t=i.getNodeFromCanvas("loading");this.gameLoading=t.getComponent("Loading")},a}(e))||r);a._RF.pop()}}}));

System.register("bundle://main/_virtual/GameConfig.ts",["cc"],(function(e){var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){i._RF.push({},"cda6dFRlwVLSo76PTOoPNfl","GameConfig",void 0);e("UIPrefab",{}),e("ResPath",{bgmPath:"/bgm",sndPath:"/snd",prefabPath:["/game"]}),e("SpritesDir",["/fruit","/monster"]),e("NodePoolName",{Monster:"Monster",Bullet:"Bullet",DeathEffect:"DeathEffect"}),e("FruitPrefabs",[{name:"fruit0",atkSpeed:1.5,damage:75},{name:"fruit1",atkSpeed:1.5,damage:75},{name:"fruit2",atkSpeed:1.5,damage:75},{name:"fruit3",atkSpeed:1.5,damage:75},{name:"fruit4",atkSpeed:1.5,damage:75},{name:"fruit5",atkSpeed:1.5,damage:75}]),e("GridPrefabs",["grid0","grid1","grid2"]),e("monsterCfg",[{id:0,speed:200,hp:800},{id:1,speed:190,hp:900},{id:2,speed:180,hp:900},{id:3,speed:170,hp:1200},{id:4,speed:170,hp:1600},{id:5,speed:170,hp:2500}]),e("waveCfg",[{id:0,wave:[{id:0,time:.1},{id:1,time:.6},{id:2,time:1},{id:2,time:9},{id:2,time:9.5},{id:3,time:10}]},{id:1,wave:[{id:1,time:.1},{id:1,time:.5},{id:2,time:1},{id:2,time:4},{id:2,time:4.5},{id:3,time:5},{id:4,time:6},{id:5,time:7},{id:5,time:7.5}]}]);e("default",(function(){})).appName="TDEatMe",i._RF.pop()}}}));

System.register("bundle://main/_virtual/GameLevel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PrefabManager.ts","./GameConfig.ts","./GameScene.ts","./Monster.ts","./MainUI.ts","./TDGame.ts"],(function(e){var t,a,n,i,s,v,r,o,c,h,w,f,u;return{setters:[function(e){t=e.inheritsLoose,a=e.createClass},function(e){n=e.cclegacy,i=e._decorator,s=e.instantiate,v=e.Component},function(e){r=e.PrefabManager},function(e){o=e.waveCfg},function(e){c=e.GameScene},function(e){h=e.Monster},function(e){w=e.MainUI},function(e){f=e.TDGame,u=e.GameState}],execute:function(){var l;n._RF.push({},"8b032ZGjnNAa6qK8PBBfcGb","GameLevel",void 0);var m=i.ccclass;i.property,e("GameLevel",m("GameLevel")(l=function(e){function n(){for(var t,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this)._wave=-1,t._nextWaveTime=1,t.waveTime=0,t.waveData=[],t}t(n,e);var i=n.prototype;return i.onLoad=function(){},i.start=function(){},i.reset=function(){this.wave=-1,this.waveTime=0,this.waveData.splice(0,this.waveData.length)},i.startNextWave=function(){this.wave++,this.waveTime=0,this.waveData.splice(0,this.waveData.length),this.wave<o.length?this.waveData=Array.from(o[this.wave].wave):this.waveData=Array.from(o[o.length-1].wave);for(var e=0;e<this.waveData.length;e++)this.waveData[e].active=!1},i.update=function(e){if(!(this.waveData.length<=0||f.getInstance().gameState!==u.gameing)){this.waveTime+=e;for(var t=0;t<this.waveData.length;t++)if(this.waveTime>this.waveData[t].time&&(void 0===this.waveData[t].active||!this.waveData[t].active)){var a=s(r.getInstance().get("monster")).getComponent(h);a.setMonsterId(this.waveData[t].id),c.getInstance().addMonster(a),this.waveData[t].active=!0}for(var n=!0,i=0;i<this.waveData.length;i++)if(void 0===this.waveData[i].active||!this.waveData[i].active){n=!1;break}n&&0===c.getInstance().monsterAttachNode.children.length&&this.startNextWave()}},a(n,[{key:"wave",get:function(){return this._wave},set:function(e){this._wave=e,w.getInstance().updateWaveLabel()}},{key:"nextWaveTime",get:function(){return this._nextWaveTime},set:function(e){this._nextWaveTime=e}}]),n}(v))||l);n._RF.pop()}}}));

System.register("bundle://main/_virtual/GameObj.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameScene.ts","./Pack.ts","./FruitManager.ts","./TDGame.ts"],(function(t){var e,n,i,o,s,r,a,c,h,g,d,u,l,f,v,p,T,y,G;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){r=t.cclegacy,a=t._decorator,c=t.Enum,h=t.CCInteger,g=t.v3,d=t.UITransform,u=t.Node,l=t.Vec3,f=t.tween,v=t.Component},function(t){p=t.GameScene},function(t){T=t.Pack},function(t){y=t.FruitManager},function(t){G=t.TDGame}],execute:function(){var O,b,m,D,C,E,j,I,P,N;r._RF.push({},"ea318FpIFZAf4qCiYyRG7wo","GameObj",void 0);var S=a.ccclass,_=a.property,M=t("GameObjType",function(t){return t[t.None=0]="None",t[t.Fruit=1]="Fruit",t[t.Grid=2]="Grid",t}({}));t("GameObj",(O=S("GameObj"),b=_({type:c(M)}),m=_({type:h}),D=_({type:h}),O(((N=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(e,"objType",j,o(e)),i(e,"width",I,o(e)),i(e,"height",P,o(e)),e.uiTrans=null,e.inited=!1,e._scale=1,e.dragingPos=g(0,0,0),e.isDraging=!1,e.coverGrids=[],e.posBeforeDraing=g(0,0,0),e._canDrag=!1,e.gridsParent=null,e}n(e,t),e.setDragingObj=function(t){e.dragingObj=t},e.getDragingObj=function(){return e.dragingObj};var r=e.prototype;return r.onLoad=function(){this.init()},r.start=function(){},r.onDestroy=function(){this.removeEventListener()},r.init=function(){this.inited||(this.uiTrans=this.node.getComponent(d),this.uiTrans.setContentSize(this.width,this.height),this.gridsParent=this.node.getChildByName("grids"),this.customInit(),this.addEventListener(),this.inited=!0)},r.customInit=function(){},r.addEventListener=function(){this.node.on(u.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(u.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(u.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},r.removeEventListener=function(){this.node.off(u.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(u.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(u.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},r.onTouchStart=function(t){this.node.parent!==T.getInstance().attachNode&&this.node.setScale(p.editModeScale.x,p.editModeScale.x,1)},r.onTouchMove=function(t){if(this.canDrag&&(!this.draging&&t.touch.getDelta().lengthSqr()>10&&this.startDraging(),this.draging)){this.dragingPos.set(t.touch.getUILocation().x,t.touch.getUILocation().y,0);var e=this.node.parent.getComponent(d);this.dragingPos=e.convertToNodeSpaceAR(this.dragingPos),this.node.setPosition(this.dragingPos),T.getInstance().updateByDragingObj(this)}},r.onTouchEnd=function(t){this.scale=this._scale,this.draging?this.endDraging():this.node.parent===T.getInstance().attachNode&&this.node.setScale(l.ONE)},r.onTouchCancel=function(t){this.scale=this._scale,this.draging?this.endDraging():this.node.parent===T.getInstance().attachNode&&this.node.setScale(l.ONE)},r.getLevel=function(){return 0},r.startDraging=function(){this.draging=!0,this.posBeforeDraing.set(this.node.getPosition()),e.setDragingObj(this),this.objType===M.Grid&&G.getInstance().enterEditPackMode()},r.endDraging=function(){if(this.draging=!1,T.getInstance().updateByDragingObj(null),e.setDragingObj(null),this.coverGrids.length===this.gridsParent.children.length)T.getInstance().addGameObj(this);else if(this.node.parent===y.getInstance().attachNode)y.getInstance().tryMerge(this)||(this.clearCoverGrids(),this.changeTweenPos(this.posBeforeDraing.x,this.posBeforeDraing.y));else if(this.node.parent===T.getInstance().attachNode){y.getInstance().tryMerge(this)?T.getInstance().removeGameObj(this):(T.getInstance().removeGameObj(this),y.getInstance().addGameObj(this),y.getInstance().updateObjsPosition())}},r.onAddPack=function(){this.node.setScale(l.ONE),this.centerOnCoverGrids();for(var t=0;t<this.coverGrids.length;t++)this.coverGrids[t].setGameObj(this)},r.onRemoveFromPack=function(){this.node.removeFromParent();for(var t=0;t<this.coverGrids.length;t++)this.coverGrids[t].setGameObj(null)},r.moveToCoverGrids=function(){this.centerOnCoverGrids(),this.node.setScale(l.ONE)},r.backToFillGrids=function(){this.node.setScale(l.ONE)},r.centerOnCoverGrids=function(){for(var t=9999,e=-9999,n=9999,i=-9999,o=0;o<this.coverGrids.length;o++){var s=this.coverGrids[o].node.getPosition();s.x<t&&(t=s.x),s.x>e&&(e=s.x),s.y<n&&(n=s.y),s.y>i&&(i=s.y)}this.node.setPosition(t+.5*(e-t),n+.5*(i-n),0)},r.addCoverGrid=function(t){if(t){for(var e=0;e<this.coverGrids.length;e++)if(t===this.coverGrids[e])return;this.coverGrids.push(t)}},r.clearCoverGrids=function(){this.coverGrids.splice(0,this.coverGrids.length)},r.changeTweenPos=function(t,e,n){void 0===n&&(n=.2),f(this.node).to(n,{position:g(t,e,0)},{easing:"backOut"}).call((function(){})).start()},r.update=function(t){},s(e,[{key:"scale",set:function(t){this._scale=t,this.node.setScale(t,t,1)}},{key:"draging",get:function(){return this.isDraging},set:function(t){this.isDraging=t}},{key:"canDrag",get:function(){return this._canDrag},set:function(t){this._canDrag=t}}]),e}(v)).dragingObj=null,j=e((E=N).prototype,"objType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.None}}),I=e(E.prototype,"width",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=e(E.prototype,"height",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),C=E))||C));r._RF.pop()}}}));

System.register("bundle://main/_virtual/GameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FruitManager.ts","./Utils.ts","./Monster.ts","./RuHua.ts","./Bullet.ts","./FadeoutEffect.ts","./TDGame.ts"],(function(t){var e,n,o,a,i,r,s,h,c,l,d,u,f,p,g,m,v,N;return{setters:[function(t){e=t.inheritsLoose,n=t.asyncToGenerator,o=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t._decorator,r=t.v3,s=t.UITransform,h=t.Vec3,c=t.Component,l=t.tween},function(t){d=t.FruitManager},function(t){u=t.default},function(t){f=t.Monster},function(t){p=t.RuHua},function(t){g=t.Bullet},function(t){m=t.FadeoutEffect},function(t){v=t.TDGame,N=t.GameState}],execute:function(){var A,y;a._RF.push({},"2f1d88QZdREtayknNRQtWKU","GameScene",void 0);var C=i.ccclass;i.property,t("GameScene",C("GameScene")(((y=function(t){function a(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).pathSpriteNode=null,e.ruhua=null,e.monsterAttachNode=null,e.bulletAttachNode=null,e.effectAttachNode=null,e.pathPoints=[],e}e(a,t),a.getInstance=function(){return a.instance};var i=a.prototype;return i.onLoad=function(){a.instance=this,this.pathSpriteNode=this.node.getChildByName("path");var t=this.node.getChildByName("gamePath");this.ruhua=t.getChildByName("ruhua").getComponent(p),this.monsterAttachNode=t.getChildByName("monster"),this.bulletAttachNode=t.getChildByName("bullet"),this.effectAttachNode=t.getChildByName("effect");for(var e=t.getChildByName("points"),n=0;n<e.children.length;n++)this.pathPoints.push(e.children[n].getPosition())},i.start=function(){},i.enterFillPackMode=function(){this.pathSpriteNode.active=!1,this.ruhua.node.active=!1,this.node.setScale(a.editModeScale)},i.enterEditPackMode=function(){d.getInstance().hideFruits()},i.enterGame=function(){var t=n(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.pathSpriteNode.active=!0,this.ruhua.node.active=!0,l(this.node).to(.5,{scale:h.ONE}).start(),t.next=5,u.sleep(600);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.addMonster=function(t){this.monsterAttachNode.addChild(t.node),t.node.setSiblingIndex(0),t.node.setPosition(this.pathPoints[0]),t.init()},i.addBullet=function(t){var e=t.shooter.node.getComponent(s).convertToWorldSpaceAR(h.ZERO),n=this.bulletAttachNode.getComponent(s).convertToNodeSpaceAR(e);this.bulletAttachNode.addChild(t.node),t.node.setPosition(n)},i.addEffect=function(t,e){this.effectAttachNode.addChild(t),t.setPosition(e),t.getComponent(m).startAnim()},i.update=function(t){if(v.getInstance().gameState===N.gameing)for(var e=0;e<this.bulletAttachNode.children.length;e++){var n=this.bulletAttachNode.children[e].getComponent(g);!n.isDestroy&&n.inited&&n.moveToTarget(t)}},i.lateUpdate=function(t){for(var e=[],n=0;n<this.monsterAttachNode.children.length;n++){var o=this.monsterAttachNode.children[n].getComponent(f);o.isDeath&&e.push(o)}for(var a=0;a<e.length;a++)e[a].destroyMonster();for(var i=[],r=0;r<this.bulletAttachNode.children.length;r++){var s=this.bulletAttachNode.children[r].getComponent(g);s.isDestroy&&i.push(s)}for(var h=0;h<i.length;h++)i[h].backToPool()},i.reset=function(){for(var t=[],e=0;e<this.monsterAttachNode.children.length;e++){var n=this.monsterAttachNode.children[e].getComponent(f);t.push(n)}for(var o=0;o<t.length;o++)t[o].destroyMonster();for(var a=[],i=0;i<this.bulletAttachNode.children.length;i++){var r=this.bulletAttachNode.children[i].getComponent(g);a.push(r)}for(var s=0;s<a.length;s++)a[s].backToPool();this.ruhua.reset()},a}(c)).editModeScale=r(1.5,1.5,1),y.instance=null,A=y))||A);a._RF.pop()}}}));

System.register("bundle://main/_virtual/Grid.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pack.ts","./GameScene.ts"],(function(t){var e,n,o,i,r,s,c,l,u,a,d,f;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){o=t.cclegacy,i=t._decorator,r=t.color,s=t.Sprite,c=t.Label,l=t.Rect,u=t.v2,a=t.Component},function(t){d=t.Pack},function(t){f=t.GameScene}],execute:function(){var h,p;o._RF.push({},"657f4Ro8vtPMqTRvYI71BEX","Grid",void 0);var g=i.ccclass;i.property,t("Grid",g("Grid")(((p=function(t){function o(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))||this).idx=0,e.row=0,e.col=0,e.sprite=null,e._unlocked=!1,e.gameObj=null,e.debugLabel=null,e}e(o,t);var i=o.prototype;return i.setGameObj=function(t){this.gameObj=t},i.getGameObj=function(){return this.gameObj},i.isEmpty=function(){return null===this.gameObj},i.onLoad=function(){this.idx=this.node.getSiblingIndex(),this.row=Math.floor(this.idx/d.gridsHNum),this.col=this.idx%d.gridsHNum,this.sprite=this.node.getComponent(s),this.unlocked=!1,this.debugLabel=this.node.getChildByName("label").getComponent(c)},i.start=function(){},i.show=function(t){this.node.active=t},i.setColor=function(t){this.sprite.color=t},i.posInGrid=function(t){var e=52.5*f.editModeScale.x;return new l(this.node.getPosition().x-e,this.node.getPosition().y-e,2*e,2*e).contains(u(t.x,t.y))},i.update=function(t){},n(o,[{key:"unlocked",get:function(){return this._unlocked},set:function(t){this._unlocked=t,this.sprite.color=t?o.defaultColor:o.alphaColor}}]),o}(a)).defaultColor=r("#fff5c0ff"),p.red=r("#F05C2Eff"),p.green=r("#25E681ff"),p.alphaColor=r("#FFF5C064"),p.defaultWidth=105,h=p))||h);o._RF.pop()}}}));

System.register("bundle://main/_virtual/GridObj.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameObj.ts"],(function(t){var r,e,n,o;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator},function(t){o=t.GameObj}],execute:function(){var i;e._RF.push({},"93065fZ28tHE5TRJm/jfn6v","GridObj",void 0);var c=n.ccclass;n.property,t("GridObj",c("GridObj")(i=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.start=function(){},n.onAddPack=function(){for(var t=0;t<this.coverGrids.length;t++)this.coverGrids[t].unlocked=!0;this.node.removeFromParent(),this.node.destroy()},n.update=function(t){},e}(o))||i);e._RF.pop()}}}));

System.register("bundle://main/_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteManager.ts","./Utils.ts","./PrefabManager.ts","./AudioManager.ts"],(function(n){var e,r,t,a,o,s,i,u,c,l,g,d,f,p,h;return{setters:[function(n){e=n.inheritsLoose,r=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){a=n.cclegacy,o=n._decorator,s=n.ProgressBar,i=n.UITransform,u=n.Label,c=n.assetManager,l=n.Component,g=n.director},function(n){d=n.SpriteManager},function(n){f=n.default},function(n){p=n.PrefabManager},function(n){h=n.AudioManager}],execute:function(){var v;a._RF.push({},"5e8b3c9hopHoboAgM4PMq/u","Loading",void 0);var b=o.ccclass;o.property,n("Loading",b("Loading")(v=function(n){function a(){for(var e,r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return(e=n.call.apply(n,[this].concat(t))||this).progressBar=null,e.barUITrans=null,e.loadingLabel=null,e.loadedFileNum=0,e.loadingCompleted=!1,e}e(a,n);var o=a.prototype;return o.onLoad=function(){var n=f.getNodeFromCanvas("progress");this.progressBar=n.getComponent(s),this.barUITrans=n.children[0].getComponent(i),this.loadingLabel=this.progressBar.node.getChildByName("label").getComponent(u)},o.start=function(){var n=this,e=0;this.schedule((function(){e++,n.loadingLabel.string="加载中";for(var r=0;r<e%4;r++)n.loadingLabel.string+="."}),.5)},o.onDestroy=function(){this.unscheduleAllCallbacks()},o.startLoading=function(){var n=r(t().mark((function n(e){var r;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Date.now(),n.next=3,d.getInstance().load();case 3:return n.next=5,p.getInstance().load();case 5:return n.next=7,h.getInstance().load();case 7:return n.next=9,this.onCfgLoaded(e);case 9:if(!((r=Date.now()-r)<2e3)){n.next=13;break}return n.next=13,f.sleep(2e3-r);case 13:g.loadScene(e);case 14:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}(),o.loadSubpackages=function(){return new Promise((function(n,e){for(var r=["font","texture","resources"],t=0,a=0;a<r.length;a++)c.loadBundle(r[a],null,(function(a,o){a?e(a):++t===r.length&&n(null)}))}))},o.onCfgLoaded=function(){var n=r(t().mark((function n(e){var r=this;return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,t){var a=Date.now();g.preloadScene(e,(function(n,e,t){var a=n/e;a>1&&(a=1),r.progressBar.progress=a,r.barUITrans.width=538*a}),(function(e,r){if(e)t(e);else{var o=Date.now()-a;console.log("场景预加载完成 耗时="+o),n(r)}}))})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),a}(l))||v);a._RF.pop()}}}));

System.register("bundle://main/_virtual/main",["./debug-view-runtime-control.ts","./AudioManager.ts","./BaseApp.ts","./GameApp.ts","./GameConfig.ts","./Loading.ts","./MathUtil.ts","./NodePoolMap.ts","./Platform.ts","./PrefabManager.ts","./SpriteManager.ts","./StringUtil.ts","./Utils.ts","./Bullet.ts","./FadeoutEffect.ts","./Fruit.ts","./FruitManager.ts","./GameLevel.ts","./GameObj.ts","./GameScene.ts","./Grid.ts","./GridObj.ts","./MainUI.ts","./Monster.ts","./Pack.ts","./RuHua.ts","./TDGame.ts","./Tip.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("bundle://main/_virtual/MainUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./FruitManager.ts","./TDGame.ts","./Pack.ts","./Tip.ts"],(function(e){var t,n,i,s,a,r,o,l,c,u;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,s=e.ProgressBar,a=e.Label,r=e.Component},function(e){o=e.FruitManager},function(e){l=e.TDGame},function(e){c=e.Pack},function(e){u=e.Tip}],execute:function(){var h,g;n._RF.push({},"699b3RFPB1A8JqfisnBtWY0","MainUI",void 0);var f=i.ccclass;i.property,e("MainUI",f("MainUI")(((g=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).inited=!1,t.startGameBtn=null,t.refreshPlusBtn=null,t.confirmBtn=null,t.waveLabel=null,t.loseUI=null,t.expProgress=null,t.levelLabel=null,t}t(n,e),n.getInstance=function(){return n.instance};var i=n.prototype;return i.onLoad=function(){n.instance=this,this.init()},i.start=function(){},i.init=function(){if(!this.inited){var e=this.node.getChildByName("bottom");this.startGameBtn=e.getChildByName("startGameBtn"),this.refreshPlusBtn=e.getChildByName("refreshPlusBtn"),this.confirmBtn=e.getChildByName("confirmBtn"),this.expProgress=e.getChildByName("expProgress").getComponent(s),this.levelLabel=this.expProgress.node.getChildByName("lvLabel").getComponent(a),this.loseUI=this.node.getChildByName("loseUI"),this.waveLabel=this.node.getChildByName("top").getChildByName("waveLabel").getComponent(a),this.inited=!0}},i.enterFillPackMode=function(){this.startGameBtn.active=!0,this.refreshPlusBtn.active=!0,this.confirmBtn.active=!1,this.expProgress.node.active=!1,this.waveLabel.node.active=!1},i.enterEditPackMode=function(){this.startGameBtn.active=!1,this.refreshPlusBtn.active=!1,this.confirmBtn.active=!0},i.enterGame=function(){this.startGameBtn.active=!1,this.refreshPlusBtn.active=!1,this.confirmBtn.active=!1,this.expProgress.node.active=!1,this.waveLabel.node.active=!0},i.onRefreshClicked=function(){o.getInstance().refreshGameObjs()},i.onRefreshPlusClicked=function(){o.getInstance().refreshGameObjs(!0)},i.onStartGameClicked=function(){c.getInstance().gameObjs.length>0?l.getInstance().enterGame():u.getInstance().showTip("至少放置一个水果才能开战")},i.onConfirmClicked=function(){l.getInstance().enterFillPackMode()},i.showLoseUI=function(e){this.loseUI.active=e},i.onRestartGameClicked=function(){this.showLoseUI(!1),l.getInstance().restartGame()},i.setExpProgress=function(e){this.expProgress.progress=e},i.updateLevelLabel=function(){this.levelLabel.string="Lv."+l.getInstance().level},i.updateWaveLabel=function(){this.waveLabel.string="第"+(l.getInstance().gameLevel.wave+1)+"/99波"},i.onDebugClicked=function(){for(var e=0;e<c.getInstance().grids.length;e++){var t=c.getInstance().grids[e];null!==t.getGameObj()?t.debugLabel.string="Filled":t.debugLabel.string="Null"}},i.update=function(e){},n}(r)).instance=null,h=g))||h);n._RF.pop()}}}));

System.register("bundle://main/_virtual/MathUtil.ts",["cc"],(function(r){var n,t;return{setters:[function(r){n=r.cclegacy,t=r.v2}],execute:function(){n._RF.push({},"ea1ec7/vEtNU6twGJ27fO+Y","MathUtil",void 0);var e=r("default",function(){function r(){}return r.randNumber=function(r){return Math.floor(Math.random()*r+1)},r.randRangeNumber=function(r,n){var t=n-r;return r+Math.round(Math.random()*t)},r.randRangeExclude=function(n,t,e){if(n===t)return n;for(var a=r.randRangeNumber(n,t);a===e;)a=r.randRangeNumber(n,t);return a},r.randExtract=function(n,t,e){void 0===e&&(e=!1);for(var a=[];a.length<t;){for(var u=r.randNumber(n),o=!1,i=0;i<a.length;i++)if(a[i]===u){o=!0;break}!1===o&&a.push(u)}return e&&a.sort((function(r,n){return r-n})),a},r.toRadian=function(r){return r*Math.PI/180},r.calcLineIntersection=function(r,n,e,a){var u=(r.x-n.x)*(e.y-a.y)-(r.y-n.y)*(e.x-a.x);if(0===u)return null;var o=((r.x-e.x)*(e.y-a.y)-(r.y-e.y)*(e.x-a.x))/u,i=-((r.x-n.x)*(r.y-e.y)-(r.y-n.y)*(r.x-e.x))/u;if(o>=0&&o<=1&&i>=0&&i<=1){var c=r.x+o*(n.x-r.x),f=r.y+o*(n.y-r.y);return t(c,f)}return null},r.vec2ToDegree=function(r){var n=Math.atan2(r.y,r.x)*(180/Math.PI);return(n=(n-90)%360)<0&&(n+=360),n},r.CeilFloat=function(r,n){var t=(Math.ceil(100*r)/100).toFixed(n);return parseFloat(t)},r.removeValueFromArray=function(r,n){var t=r.indexOf(n);-1!==t&&r.splice(t,1)},r.modulo=function(r,n){return r-Math.floor(r/n)*n},r.clamp=function(r,n,t){return Math.max(n,Math.min(t,r))},r}());e.msDay=864e5,e.msHour=36e5,e.msMin=6e4,n._RF.pop()}}}));

System.register("bundle://main/_virtual/Monster.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NodePoolMap.ts","./GameConfig.ts","./GameScene.ts","./AudioManager.ts","./SpriteManager.ts","./TDGame.ts"],(function(t){var e,i,s,n,o,a,h,r,c,p,d,g,u,m,f,v,l,I;return{setters:[function(t){e=t.inheritsLoose,i=t.createClass},function(t){s=t.cclegacy,n=t._decorator,o=t.UITransform,a=t.ProgressBar,h=t.Sprite,r=t.Vec3,c=t.v3,p=t.Component},function(t){d=t.default},function(t){g=t.monsterCfg,u=t.NodePoolName},function(t){m=t.GameScene},function(t){f=t.AudioManager},function(t){v=t.SpriteManager},function(t){l=t.TDGame,I=t.GameState}],execute:function(){var P;s._RF.push({},"ffb43x4K0VFdoacsxR/7BYk","Monster",void 0);var D=n.ccclass;n.property,t("Monster",D("Monster")(P=function(t){function s(){for(var e,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))||this).sprite=null,e.active=!1,e.inited=!1,e.isDeath=!1,e.movSpeed=130,e.movDir=c(0,0,0),e.totalHp=500,e._hp=500,e._expectHp=e.hp,e.movLen=c(0,0,0),e.pos2Target=c(0,0,0),e.targetPointIdx=0,e.hpBar=null,e.attackers=[],e.monsterId=0,e}e(s,t);var n=s.prototype;return n.onLoad=function(){},n.start=function(){},n.setMonsterId=function(t){if(!(t<0||t>=g.length)){this.monsterId=t,this.init();var e=v.getInstance().get("monster"+this.monsterId);this.sprite.spriteFrame=e,this.sprite.node.getComponent(o).setContentSize(e.originalSize.width,e.originalSize.height),this.movSpeed=g[this.monsterId].speed,this.totalHp=g[this.monsterId].hp,this.hp=this.totalHp;var i=this.sprite.node.getComponent(o);this.hpBar.node.setPosition(0,.5*i.contentSize.y+20,0)}},n.init=function(){this.inited||(this.inited=!0,this.active=!0,this.isDeath=!1,this.movDir.set(-1,0,0),this.hpBar=this.node.getChildByName("hpBar").getComponent(a),this.sprite=this.node.getChildByName("sprite").getComponent(h),this.inited=!0)},n.reset=function(){this.active=!1,this.node.active=!0,this.inited=!1,this.isDeath=!1,this.hp=500,this.totalHp=500,this.movSpeed=130,this.targetPointIdx=1,this.movDir.set(-1,0,0),this.attackers.splice(0,this.attackers.length)},n.destroyMonster=function(){this.node.removeFromParent(),this.node.destroy()},n.move=function(t){if(!(this.targetPointIdx>=m.getInstance().pathPoints.length)){r.multiplyScalar(this.movLen,this.movDir,t*this.movSpeed);var e=this.movLen.length();if(r.subtract(this.pos2Target,m.getInstance().pathPoints[this.targetPointIdx],this.node.getPosition()),e>=this.pos2Target.length()?(this.node.setPosition(m.getInstance().pathPoints[this.targetPointIdx]),this.targetPointIdx++,this.updateMovDir()):(r.add(this.movLen,this.node.getPosition(),this.movLen),this.node.setPosition(this.movLen)),this.targetPointIdx===m.getInstance().pathPoints.length-1){var i=c(0,0,0);if(r.subtract(i,m.getInstance().ruhua.node.getPosition(),this.node.getPosition()),i.length()<40){for(var s=0;s<this.attackers.length;s++)this.attackers[s].clearAttackTarget();this.isDeath=!0,this.active=!1,this.node.active=!1,m.getInstance().ruhua.damage()}}}},n.updateMovDir=function(){1===this.targetPointIdx?this.movDir.set(0,1,0):2===this.targetPointIdx?this.movDir.set(-1,0,0):3===this.targetPointIdx?this.movDir.set(0,-1,0):4===this.targetPointIdx?this.movDir.set(1,0,0):5===this.targetPointIdx&&this.movDir.set(0,1,0)},n.onDamage=function(t){this.isDeath||(f.getInstance().playSnd("damage"),this.hp-=t.damage)},n.addAttacker=function(t){for(var e=0;e<this.attackers.length;e++)if(this.attackers[e]===t)return;this.attackers.push(t)},n.death=function(){if(!this.isDeath){this.isDeath=!0,f.getInstance().playSnd("death");var t=d.get(u.DeathEffect);m.getInstance().addEffect(t,c(this.node.getPosition().x,this.node.getPosition().y+100,0));for(var e=0;e<this.attackers.length;e++)this.attackers[e].clearAttackTarget();this.active=!1,this.node.active=!1}},n.isExpectDeath=function(){return this.expectHp<=0},n.update=function(t){l.getInstance().gameState===I.gameing&&this.inited&&this.active&&this.move(t)},i(s,[{key:"hp",get:function(){return this._hp},set:function(t){this._hp=t,this._hp<0&&(this._hp=0,this.death()),this.hpBar.progress=this._hp/this.totalHp}},{key:"expectHp",get:function(){return this._expectHp},set:function(t){this._expectHp=t}}]),s}(p))||P);s._RF.pop()}}}));

System.register("bundle://main/_virtual/NodePoolMap.ts",["cc"],(function(o){var n,e,t,a;return{setters:[function(o){n=o.cclegacy,e=o.Node,t=o.instantiate,a=o.NodePool}],execute:function(){n._RF.push({},"a033cJ91S9EfIla4LR8KL0J","NodePoolMap",void 0);var l=function(o){this.nodePrefab=null,this.nodePool=null,this.nodePrefab=o,this.nodePool=new a};o("default",function(){function o(){}return o.createPool=function(n,a,i){if(void 0===i&&(i=0),a&&!(n.trim().length<=0||n in o.poolMap)){var p=null;p=a instanceof e?a:t(a);var r=new l(p);if(o.poolMap[n]=r,i>0&&a)for(var u=0;u<i;u++){var f=t(p);r.nodePool.put(f)}}},o.get=function(n){if(n in o.poolMap){var e=o.poolMap[n].nodePool.get();return e||(o.create(n),o.poolMap[n].nodePool.get())}return null},o.create=function(n,e){if(void 0===e&&(e=5),n in o.poolMap)for(var a=0;a<e;a++){var l=t(o.poolMap[n].nodePrefab);o.poolMap[n].nodePool.put(l)}},o.put=function(n,e){e&&n in o.poolMap&&o.poolMap[n].nodePool.put(e)},o}()).poolMap={},n._RF.pop()}}}));

System.register("bundle://main/_virtual/Pack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Grid.ts","./GameObj.ts","./FruitManager.ts","./Fruit.ts"],(function(t){var i,e,r,n,s,o,d,g,a,h,l;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,n=t.Sprite,s=t.UITransform,o=t.Vec3,d=t.Component},function(t){g=t.Grid},function(t){a=t.GameObjType},function(t){h=t.FruitManager},function(t){l=t.Fruit}],execute:function(){var c,u;e._RF.push({},"76dcew6kPNMsL/nLJKaUpCZ","Pack",void 0);var f=r.ccclass;r.property,t("Pack",f("Pack")(((u=function(t){function e(){for(var i,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return(i=t.call.apply(t,[this].concat(r))||this).bgSprite=null,i.bgUITrans=null,i.grids=[],i.gridsParent=null,i.gameObjs=[],i.attachNode=null,i}i(e,t),e.getInstance=function(){return e.instance};var r=e.prototype;return r.onLoad=function(){e.instance=this,this.bgSprite=this.node.getChildByName("bg").getComponent(n),this.bgUITrans=this.bgSprite.node.getComponent(s),this.gridsParent=this.node.getChildByName("grids"),this.attachNode=this.node.getChildByName("attach");for(var t=0;t<this.gridsParent.children.length;t++)this.grids.push(this.gridsParent.children[t].getComponent(g))},r.start=function(){},r.init=function(){this.grids[7].unlocked=!0,this.grids[15].unlocked=!0,this.grids[19].unlocked=!0,this.grids[27].unlocked=!0,this.grids[11].unlocked=!0,this.grids[12].unlocked=!0,this.grids[13].unlocked=!0,this.grids[16].unlocked=!0,this.grids[17].unlocked=!0,this.grids[18].unlocked=!0,this.grids[21].unlocked=!0,this.grids[22].unlocked=!0,this.grids[23].unlocked=!0,this.displayUnlockedGrids(),this.updateBgContentSize()},r.reset=function(){for(var t=0;t<this.grids.length;t++)this.grids[t].unlocked=!1,this.grids[t].setGameObj(null);this.gameObjs.splice(0,this.gameObjs.length),this.attachNode.destroyAllChildren(),this.attachNode.removeAllChildren(),this.init()},r.updateBgContentSize=function(t){void 0===t&&(t=!1);for(var i,r,n=99,s=-1,o=99,d=-1,a=null,h=0,l=0;l<e.gridsVNum;l++)for(var c=0;c<e.gridsHNum;c++)h=l*e.gridsHNum+c,((a=this.grids[h]).unlocked||t)&&(a.row<n&&(n=a.row),a.row>s&&(s=a.row),a.col<o&&(o=a.col),a.col>d&&(d=a.col));i=s-n+1;var u=(r=d-o+1)*g.defaultWidth+(r-1)*e.gridInterval+2*e.bgMargin,f=i*g.defaultWidth+(i-1)*e.gridInterval+2*e.bgMargin;this.bgUITrans.setContentSize(u,f)},r.displayUnlockedGrids=function(){for(var t=0;t<this.grids.length;t++)this.grids[t].unlocked?this.grids[t].show(!0):this.grids[t].show(!1)},r.displayAllGrids=function(){for(var t=0;t<this.grids.length;t++)this.grids[t].show(!0)},r.enterFillPackMode=function(){this.node.setPosition(0,150,0),this.displayUnlockedGrids();for(var t=9999,i=-9999,e=9999,r=-9999,n=0;n<this.grids.length;n++)if(this.grids[n].unlocked){var s=this.grids[n].node.getPosition();s.x<t&&(t=s.x),s.x>i&&(i=s.x),s.y<e&&(e=s.y),s.y>r&&(r=s.y)}var o=t+.5*(i-t),d=e+.5*(r-e),g=this.node.getPosition();this.node.setPosition(-o,g.y,0),g=this.bgSprite.node.getPosition(),this.bgSprite.node.setPosition(o,d,g.z),this.updateBgContentSize()},r.enterEditPackMode=function(){this.node.getPosition();this.node.setPosition(0,150,0),this.bgSprite.node.getPosition(),this.bgSprite.node.setPosition(0,0,0),this.displayAllGrids(),this.updateBgContentSize(!0)},r.enterGame=function(){for(var t=9999,i=-9999,e=9999,r=-9999,n=0;n<this.grids.length;n++)if(this.grids[n].unlocked){var s=this.grids[n].node.getPosition();s.x<t&&(t=s.x),s.x>i&&(i=s.x),s.y<e&&(e=s.y),s.y>r&&(r=s.y)}var o=t+.5*(i-t),d=e+.5*(r-e);this.node.setPosition(-o,-d-100,0)},r.updateByDragingObj=function(t){if(t){var i=!1;t.objType===a.Grid&&(i=!0);for(var e=[],r=0;r<t.gridsParent.children.length;r++){var n=t.gridsParent.children[r].getComponent(s).convertToWorldSpaceAR(o.ZERO),d=this.gridsParent.getComponent(s).convertToNodeSpaceAR(n),h=-1;if((h=i?this.posInLockedGrid(d):this.posInUnlockedGrid(d))>=0){for(var c=!1,u=0;u<e.length;u++)if(e[u]===h){c=!0;break}c||e.push(h)}}for(var f=0;f<this.grids.length;f++)this.grids[f].unlocked?this.grids[f].setColor(g.defaultColor):this.grids[f].setColor(g.alphaColor);var p=!0,v=0,m=null;if(!i)for(var k=t.node.getComponent(l),C=0;C<e.length;C++){var b=this.grids[e[C]].getGameObj();if(null!==b){var G=b.getComponent(l);if(b===t)continue;if(G.getFruitId()===k.getFruitId()&&G.getLevel()===k.getLevel()){m=G,v++;continue}p=!1;break}}m&&v!==e.length&&(p=!1),t.clearCoverGrids();for(var P=0;P<e.length;P++)e.length===t.gridsParent.children.length?i?(this.grids[e[P]].setColor(g.defaultColor),t.addCoverGrid(this.grids[e[P]])):p?(this.grids[e[P]].setColor(g.green),t.addCoverGrid(this.grids[e[P]])):(this.grids[e[P]].setColor(g.red),t.addCoverGrid(this.grids[e[P]])):this.grids[e[P]].setColor(g.red)}else for(var y=0;y<this.grids.length;y++)this.grids[y].unlocked?this.grids[y].setColor(g.defaultColor):this.grids[y].setColor(g.alphaColor)},r.posInUnlockedGrid=function(t){for(var i=0;i<this.grids.length;i++){if(this.grids[i].unlocked)if(this.grids[i].posInGrid(t))return i}return-1},r.posInLockedGrid=function(t){for(var i=0;i<this.grids.length;i++){if(!this.grids[i].unlocked)if(this.grids[i].posInGrid(t))return i}return-1},r.addGameObj=function(t){if(t){var i=!0,r=0,n=null;if(t.objType===a.Fruit)for(var s=0;s<t.coverGrids.length;s++){var o=t.coverGrids[s].getGameObj();if(null!==o){var d=o.getComponent(l);if(d===t)continue;if(d.getFruitId()===t.getComponent(l).getFruitId()&&d.getLevel()===t.getComponent(l).getLevel()){r++,n=d;continue}i=!1;break}}n&&r!==t.coverGrids.length&&(i=!1,n=null),t.objType===a.Fruit?t.node.parent===h.getInstance().attachNode?i?(h.getInstance().removeGameObj(t),n?n.merge(t):(this.attachNode.addChild(t.node),t.onAddPack(),this.gameObjs.push(t))):(t.clearCoverGrids(),t.changeTweenPos(t.posBeforeDraing.x,t.posBeforeDraing.y)):t.node.parent===e.getInstance().attachNode&&(i?n&&n!==t?n.merge(t):t.moveToCoverGrids():t.backToFillGrids()):(h.getInstance().removeGameObj(t),t.onAddPack())}},r.removeGameObj=function(t){if(t)for(var i=0;i<this.gameObjs.length;i++)if(this.gameObjs[i]===t)return this.gameObjs[i].onRemoveFromPack(),void this.gameObjs.splice(i,1)},r.update=function(t){},e}(d)).gridsHNum=5,u.gridsVNum=7,u.gridsNum=u.gridsHNum*u.gridsVNum,u.bgMargin=32,u.gridInterval=15,u.instance=null,c=u))||c);e._RF.pop()}}}));

System.register("bundle://main/_virtual/Platform.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,s,a,l;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,r=e._decorator,o=e.v2,s=e.view,a=e.sys,l=e.Component}],execute:function(){var f,c;n._RF.push({},"1f75azrNt9AeIu4mTZ+eBw4","Platform",void 0);var h=r.ccclass,p=(r.property,e("PlatformType",function(e){return e[e.Unknown=0]="Unknown",e[e.WebMobile=1]="WebMobile",e[e.WebPC=2]="WebPC",e[e.Wechat=3]="Wechat",e[e.Android=4]="Android",e[e.IOS=5]="IOS",e}({})));e("Platform",h("Platform")(((c=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this)._platformType=p.Unknown,t._screenSize=o(0,0),t._halfScreenSize=o(0,0),t._designSize=o(0,0),t._halfDesignSize=o(0,0),t}t(n,e),n.getInstance=function(){return n.instance};var r=n.prototype;return r.onLoad=function(){n.instance=this,this.init()},r.start=function(){},r.init=function(){this.decidePlatform();var e=s.getVisibleSize();this._screenSize.x=e.width,this._screenSize.y=e.height,this._halfScreenSize.x=.5*this._screenSize.x,this._halfScreenSize.y=.5*this._screenSize.y;var t=s.getDesignResolutionSize();this._designSize.x=t.width,this._designSize.y=t.height,this._halfDesignSize.x=.5*this._designSize.x,this._halfDesignSize.y=.5*this._designSize.y},r.decidePlatform=function(){this._platformType=p.Unknown,console.log("cur platform="+a.platform),a.platform===a.Platform.MOBILE_BROWSER?this._platformType=p.WebMobile:a.platform===a.Platform.DESKTOP_BROWSER?this._platformType=p.WebPC:a.platform===a.Platform.ANDROID?this._platformType=p.Android:a.platform===a.Platform.IOS?this._platformType=p.IOS:a.platform===a.Platform.WECHAT_GAME&&(this._platformType=p.Wechat)},r.needSubpackages=function(){return this._platformType===p.Wechat},i(n,[{key:"platformType",get:function(){return this._platformType}},{key:"screenSize",get:function(){return this._screenSize}},{key:"halfScreenSize",get:function(){return this._halfScreenSize}},{key:"designSize",get:function(){return this._designSize}},{key:"halfDesignSize",get:function(){return this._halfDesignSize}}]),n}(l)).instance=null,f=c))||f);n._RF.pop()}}}));

System.register("bundle://main/_virtual/PrefabManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts"],(function(r){var e,n,t,a,o,s,c,i,u;return{setters:[function(r){e=r.inheritsLoose,n=r.asyncToGenerator,t=r.regeneratorRuntime},function(r){a=r.cclegacy,o=r._decorator,s=r.Component,c=r.resources,i=r.Prefab},function(r){u=r.ResPath}],execute:function(){var f,p;a._RF.push({},"f2c48JwRppBvYXSl/psh9rl","PrefabManager",void 0);var l=o.ccclass;o.property,r("PrefabManager",l("PrefabManager")(((p=function(r){function a(){for(var e,n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];return(e=r.call.apply(r,[this].concat(t))||this).prefabs={},e}e(a,r),a.getInstance=function(){return a.instance};var o=a.prototype;return o.onLoad=function(){a.instance=this},o.start=function(){},o.load=function(){var r=n(t().mark((function r(){var e=this;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){for(var t="",o="",s=0,f=0;f<u.prefabPath.length;f++)t=a.baseUrl+u.prefabPath[f],c.loadDir(t,i,(function(t,a){if(t)n(t);else{for(var c=0;c<a.length;c++)o=a[c].name,e.prefabs[o]=a[c];++s===u.prefabPath.length&&r(a)}}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),o.get=function(r){return this.prefabs.hasOwnProperty(r)?this.prefabs[r]:null},a}(s)).baseUrl="/prefab",p.instance=null,f=p))||f);a._RF.pop()}}}));

System.register("bundle://main/_virtual/rollupPluginModLoBabelHelpers.js",[],(function(t){return{execute:function(){function e(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function n(e,r){return(n=t("setPrototypeOf",Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t}))(e,r)}function o(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function i(t){var e=o(t,"string");return"symbol"==typeof e?e:String(e)}t({applyDecoratedDescriptor:function(t,e,r,n,o){var i={};Object.keys(n).forEach((function(t){i[t]=n[t]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=r.slice().reverse().reduce((function(r,n){return n(t,e,r)||r}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(t,e,i),i=null);return i},assertThisInitialized:function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},asyncToGenerator:function(t){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=t.apply(r,n);function u(t){e(a,o,i,u,c,"next",t)}function c(t){e(a,o,i,u,c,"throw",t)}u(void 0)}))}},createClass:function(t,e,n){e&&r(t.prototype,e);n&&r(t,n);return Object.defineProperty(t,"prototype",{writable:!1}),t},inheritsLoose:function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)},initializerDefineProperty:function(t,e,r,n){if(!r)return;Object.defineProperty(t,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})},regeneratorRuntime:function(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t("regeneratorRuntime",(function(){return r}));var e,r={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(e){f=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),u=new S(n||[]);return i(a,"_invoke",{value:P(t,r,u)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=s;var p="suspendedStart",y="executing",v="completed",d={};function g(){}function m(){}function b(){}var w={};f(w,u,(function(){return this}));var L=Object.getPrototypeOf,x=L&&L(L(G([])));x&&x!==n&&o.call(x,u)&&(w=x);var E=b.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function r(n,i,a,u){var c=h(t[n],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==typeof f&&o.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,u)}))}u(c.arg)}var n;i(this,"_invoke",{value:function(t,o){function i(){return new e((function(e,n){r(t,o,e,n)}))}return n=n?n.then(i,i):i()}})}function P(t,r,n){var o=p;return function(i,a){if(o===y)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var c=_(u,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var l=h(t,r,n);if("normal"===l.type){if(o=n.done?v:"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o=v,n.method="throw",n.arg=l.arg)}}}function _(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,_(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,d;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function z(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function G(t){if(t||""===t){var r=t[u];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return m.prototype=b,i(E,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:m,configurable:!0}),m.displayName=f(b,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,f(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},r.awrap=function(t){return{__await:t}},O(j.prototype),f(j.prototype,c,(function(){return this})),r.AsyncIterator=j,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new j(s(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),f(E,l,"Generator"),f(E,u,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=G,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(z),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),z(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;z(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:G(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},r},setPrototypeOf:n,toPrimitive:o,toPropertyKey:i})}}}));

System.register("bundle://main/_virtual/RuHua.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TDGame.ts"],(function(t){var n,e,a,i,c,r;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){a=t.cclegacy,i=t._decorator,c=t.Component},function(t){r=t.TDGame}],execute:function(){var u,o;a._RF.push({},"850cek+NzxNS7lZhVXonh1d","RuHua",void 0);var s=i.ccclass;i.property,t("RuHua",s("RuHua")(((o=function(t){function a(){for(var n,e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return(n=t.call.apply(t,[this].concat(a))||this)._hp=3,n}n(a,t),a.getInstance=function(){return a.instance};var i=a.prototype;return i.onLoad=function(){a.instance=this},i.start=function(){},i.reset=function(){this.hp=3},i.updateHearts=function(){for(var t=this.node.getChildByName("hearts"),n=0;n<t.children.length;n++)this.hp>n?t.children[n].active=!0:t.children[n].active=!1},i.damage=function(){this.hp--},i.death=function(){r.getInstance().gameOver()},i.update=function(t){},e(a,[{key:"hp",get:function(){return this._hp},set:function(t){this._hp=t,this.updateHearts(),0===this.hp&&this.death()}}]),a}(c)).instance=null,u=o))||u);a._RF.pop()}}}));

System.register("bundle://main/_virtual/SpriteManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts"],(function(r){var n,t,e,i,a,o,s,c,u;return{setters:[function(r){n=r.inheritsLoose,t=r.asyncToGenerator,e=r.regeneratorRuntime},function(r){i=r.cclegacy,a=r._decorator,o=r.Component,s=r.resources,c=r.SpriteFrame},function(r){u=r.SpritesDir}],execute:function(){var p,l;i._RF.push({},"dff45/tXA5F4o0KAR1IyZnj","SpriteManager",void 0);var f=a.ccclass;a.property,r("SpriteManager",f("SpriteManager")(((l=function(r){function i(){for(var n,t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(n=r.call.apply(r,[this].concat(e))||this).sprites={},n}n(i,r),i.getInstance=function(){return i.instance};var a=i.prototype;return a.onLoad=function(){i.instance=this},a.start=function(){},a.load=function(){var r=t(e().mark((function r(){var n,t=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=u.slice(0,u.length),r.abrupt("return",new Promise((function(r,e){for(var a="",o="",u=0;u<n.length;u++)a=i.baseUrl+n[u],s.loadDir(a,c,(function(n,i){if(n)e(n);else{for(var a=0;a<i.length;a++)o=i[a].name,t.sprites[o]=i[a];r(i)}}))})));case 2:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),a.get=function(r){return this.sprites.hasOwnProperty(r)?this.sprites[r]:null},i}(o)).baseUrl="/sprite",l.instance=null,p=l))||p);i._RF.pop()}}}));

System.register("bundle://main/_virtual/StringUtil.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"8e3b8AwMP9MbL8eGR8WR33R","StringUtil",void 0);var e=t("default",function(){function t(){}return t.stringFormat=function(t){if(0==(arguments.length<=1?0:arguments.length-1)||null==t)return"";for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var e="{"+r+"}";t=t.replace(e,r+1<1||arguments.length<=r+1?void 0:arguments[r+1])}return t},t.format=function(t){if(0==(arguments.length<=1?0:arguments.length-1)||null==t)return"";for(var r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var e="{"+r+"}";t=t.replace(e,r+1<1||arguments.length<=r+1?void 0:arguments[r+1])}return t},t.FormatTimeMMSS=function(t){var r=t.getMinutes(),e=r<10?"0"+r:r.toString(),n=t.getSeconds();return e+":"+(n<10?"0"+n:n.toString())},t.FormatTimeHHMM=function(t){var r=t.getHours(),e=r<10?"0"+r:r.toString(),n=t.getMinutes();return e+":"+(n<10?"0"+n:n.toString())},t.FormatTimeHHMMSS=function(t){var r=t.getHours(),e=t.getMinutes(),n=t.getSeconds();return(r<10?"0"+r:r.toString())+":"+(e<10?"0"+e:e.toString())+":"+(n<10?"0"+n:n.toString())},t.FormatTimeYMD=function(r,e){var n=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),u=o<10?"0"+o:o,a=i<10?"0"+i:i;return t.format(t.Localize(r),n,u,a)},t.FormatTimeYMDHHMM=function(r,e){var n=e.getFullYear(),o=e.getMonth()+1,i=e.getDate(),u=e.getHours(),a=e.getMinutes(),g=o<10?"0"+o:o,l=i<10?"0"+i:i,c=u<10?"0"+u:u.toString(),f=a<10?"0"+a:a.toString();return t.format(t.Localize(r),n,g,l,c,f)},t.FormatTimeMD=function(r,e){var n=e.getMonth()+1,o=e.getDate(),i=n<10?"0"+n:n,u=o<10?"0"+o:o;return t.format(t.Localize(r),i,u)},t.FormatTimeBySec=function(r){if(r>0){var e="",n="",o="",i=Math.floor(r/3600);e=""+i,i<10&&(e="0"+i);var u=Math.floor(r%3600/60);n=""+u,u<10&&(n="0"+u);var a=r%60;return o=""+a,a<10&&(o="0"+a),r>=3600?t.format("{0}:{1}:{2}",e,n,o):t.format("{1}:{2}",e,n,o)}return""},t.getNumToString=function(t){var r=t/100,e=0,n="";return r>=1e18?(e=r/1e18,n="bb"):r>=1e15?(e=r/1e15,n="aa"):r>=1e12?(e=r/1e12,n="T"):r>=1e9?(e=r/1e9,n="B"):r>=1e6?(e=r/1e6,n="M"):r>=1e4?(e=r/1e3,n="K"):e=r,(Math.floor(100*e)/100).toString()+n},t.colorString=function(t,r){return"<color=#703B2C>"+t+"</c>"},t.Localize=function(t){return String(t)},t}());e.isEmpty=function(t){return null===t||""===t||void 0===t||0===t.length},e.isNotEmpty=function(t){return null!==t&&""!==t&&void 0!==t&&0!==t.length},r._RF.pop()}}}));

System.register("bundle://main/_virtual/TDGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Pack.ts","./GameScene.ts","./MainUI.ts","./FruitManager.ts","./AudioManager.ts","./PrefabManager.ts","./NodePoolMap.ts","./GameConfig.ts","./GameLevel.ts"],(function(e){var t,n,a,i,c,s,o,r,l,g,u,m,h,f,p,d;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass,a=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,o=e.Component},function(e){r=e.Pack},function(e){l=e.GameScene},function(e){g=e.MainUI},function(e){u=e.FruitManager},function(e){m=e.AudioManager},function(e){h=e.PrefabManager},function(e){f=e.default},function(e){p=e.NodePoolName},function(e){d=e.GameLevel}],execute:function(){var k,v;c._RF.push({},"52515KrTpNGLJw/KD5sq8Sg","TDGame",void 0);var P=s.ccclass,S=(s.property,e("GameState",function(e){return e[e.None=0]="None",e[e.fillPack=1]="fillPack",e[e.editPack=2]="editPack",e[e.gameing=3]="gameing",e[e.gameover=4]="gameover",e}({})));e("TDGame",P("TDGame")(((v=function(e){function c(){for(var t,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(t=e.call.apply(e,[this].concat(a))||this).gameScene=null,t.pack=null,t.gameLevel=null,t.timeTick=0,t._gameState=S.None,t._exp=0,t._level=1,t}t(c,e),c.getInstance=function(){return c.instance};var s=c.prototype;return s.onLoad=function(){c.instance=this,this.init()},s.start=function(){this.startGame()},s.init=function(){this.gameScene=this.node.parent.getChildByName("gameScene").getComponent(l),this.pack=this.gameScene.node.getChildByName("pack").getComponent(r);this.gameScene.node.getChildByName("path");this.gameLevel=this.gameScene.node.getChildByName("gameLevel").getComponent(d);var e=h.getInstance().get("monster");f.createPool(p.Monster,e,50),e=h.getInstance().get("bullet"),f.createPool(p.Bullet,e,50),e=h.getInstance().get("death"),f.createPool(p.DeathEffect,e,30)},s.startGame=function(){this.pack.init(),this.enterFillPackMode(),u.getInstance().spawnGameObjs(),m.getInstance().playBgm("bgm1"),this.exp=0,this.level=1},s.enterFillPackMode=function(){this.gameState=S.fillPack,this.gameScene.enterFillPackMode(),this.pack.enterFillPackMode(),g.getInstance().enterFillPackMode(),u.getInstance().showAll()},s.enterEditPackMode=function(){this.gameState=S.editPack,this.gameScene.enterEditPackMode(),this.pack.enterEditPackMode(),g.getInstance().enterEditPackMode()},s.enterGame=function(){var e=a(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.getInstance().enterGame(),this.pack.enterGame(),u.getInstance().show(!1),e.next=5,this.gameScene.enterGame();case 5:this.gameState=S.gameing,c.getInstance().gameLevel.startNextWave();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.gameOver=function(){this.gameState=S.gameover,g.getInstance().showLoseUI(!0)},s.restartGame=function(){this.pack.reset(),this.gameScene.reset(),this.enterFillPackMode(),u.getInstance().clear(),u.getInstance().spawnGameObjs()},s.addExp=function(e){this.exp+=e},s.update=function(e){},n(c,[{key:"gameState",get:function(){return this._gameState},set:function(e){this._gameState=e}},{key:"exp",get:function(){return this._exp},set:function(e){this._exp=e,this._exp>100&&(this._exp-=100,this.level++),g.getInstance().setExpProgress(this._exp/100)}},{key:"level",get:function(){return this._level},set:function(e){this._level=e,g.getInstance().updateLevelLabel()}}]),c}(o)).instance=null,k=v))||k);c._RF.pop()}}}));

System.register("bundle://main/_virtual/Tip.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,i,o,a,l,c,s;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Label,a=t.UIOpacity,l=t.tween,c=t.v3,s=t.Component}],execute:function(){var r,p;e._RF.push({},"abb34fkJ9FHjp36b0l72vWj","Tip",void 0);var u=i.ccclass;i.property,t("Tip",u("Tip")(((p=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).label=null,n.opacity=null,n}n(e,t),e.getInstance=function(){return e.instance};var i=e.prototype;return i.onLoad=function(){e.instance=this,this.label=this.node.getChildByName("label").getComponent(o),this.opacity=this.label.node.getComponent(a)},i.start=function(){},i.showTip=function(t){var n=this;this.label.node.active||(this.label.string=t,this.label.node.setPosition(0,0,0),this.label.node.active=!0,this.opacity.opacity=255,this.scheduleOnce((function(){l(n.label.node).to(.6,{position:c(0,100,0)}).start(),l(n.opacity).to(.6,{opacity:0}).call((function(){n.label.node.active=!1})).start()}),1))},e}(s)).instance=null,r=p))||r);e._RF.pop()}}}));

System.register("bundle://main/_virtual/Utils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,r,o,u;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy,o=n.director,u=n.Canvas}],execute:function(){r._RF.push({},"0552fJbpsRKOanuaOVBav7Q","Utils",void 0);n("default",function(){function n(){}return n.getNodeFromScene=function(n){return o.getScene().getChildByName(n)},n.getNodeFromCanvas=function(e){var t=n.getNodeFromScene("Canvas");return t?t.getChildByName(e):null},n.getCanvas=function(){var e=n.getNodeFromScene("Canvas");return e?e.getComponent(u):null},n.GetorAddComponent=function(n,e){var t=n.getComponent(e);return null!=t&&null!=t||(t=n.addComponent(e)),t},n.sleep=function(){var n=e(t().mark((function n(e){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){setTimeout((function(){n("")}),e)})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),n.generateUniqueID=function(){return Math.random().toString(36).substr(2,9)},n.arraysAreEqual=function(n,e){return JSON.stringify(n)===JSON.stringify(e)},n}());r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'bundle://main/_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});